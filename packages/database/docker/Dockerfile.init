FROM node:20-alpine

RUN npm install -g pnpm@10.4.1 turbo@2.1.3

WORKDIR /app

COPY package.json pnpm-lock.yaml pnpm-workspace.yaml ./

COPY packages/ ./packages/
COPY apps/ ./apps/

RUN pnpm install --frozen-lockfile

COPY . .